import{d as h,r as c,y as T,z as w,c as x,M as a,w as i,a as $,g as L,L as v,k as M}from"./index-ee3c7e13.js";import{E as U,m as N}from"./MyTable-6973be7e.js";import{c as F,E as B,b as z}from"./useHook-6a1476cf.js";import{r as k,E as S}from"./overlay-808d2732.js";import{E as j,a as q}from"./form-item-ed9b604c.js";import{E as I}from"./message-e1a3be94.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import"./popper-540ae54e.js";import"./index-fd46e808.js";import"./focus-trap-16c82708.js";/* empty css                */const R=async function(r){return await k({url:"/add/label",method:"post",data:r})},A=async function(r){return await k({url:"/select/label",method:"get",params:r})},G=async function(r){return await k({url:"/delete/label",method:"delete",data:r})},H=async function(r){return await k({url:"/update/label",method:"put",data:r})},J={class:"dialog-footer"},K=h({__name:"EditTableLoading",props:Object.assign(F(),{loadingTitle:{type:String,default:"添加标签"},editLabel:{type:String,default:""},editId:{type:Number,default:0}}),emits:["input","success"],setup(r,{emit:m}){const u=r,l=c(u.show),_=c(),d=T({table:[{required:!0,message:"请填写标签",trigger:["blur","change"]}]}),n=T({table:""});w(()=>u.show,s=>{l.value=s}),w(()=>l.value,s=>{m("input",s)}),w(()=>u.editLabel,s=>{var e;n.table=s,s||(e=_.value)==null||e.resetFields()});async function f(s){try{await s.validate(async e=>{e&&(u.editLabel?(await H({label:n.table,id:u.editId})).code===200&&I({message:"修改成功",type:"success"}):(await R({...n}),n.table="",I({message:"添加成功",type:"success"})),l.value=!1,m("success"))})}catch{}}return(s,e)=>{const y=B,E=j,C=q,b=z,p=S;return $(),x("div",null,[a(p,{modelValue:l.value,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value=t),title:s.loadingTitle,width:"50rem",center:""},{footer:i(()=>[L("span",J,[a(b,{onClick:e[1]||(e[1]=t=>l.value=!1)},{default:i(()=>[v("取消")]),_:1}),a(b,{type:"primary",onClick:e[2]||(e[2]=t=>f(_.value))},{default:i(()=>[v(" 确定 ")]),_:1})])]),default:i(()=>[a(C,{ref_key:"ruleFormRef",ref:_,"label-width":"120px",class:"demo-ruleForm","status-icon":"",rules:d,model:n},{default:i(()=>[a(E,{label:"标签名称：",prop:"table"},{default:i(()=>[a(y,{modelValue:n.table,"onUpdate:modelValue":e[0]||(e[0]=t=>n.table=t),placeholder:"请输入标签名称进行添加"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])])}}}),P={class:"dialog-footer"},Q=h({__name:"DeleteTableLoading",props:Object.assign(F(),{title:{type:String,default:""},delId:{type:Number,default:0}}),emits:["input","success"],setup(r,{emit:m}){const u=r,l=c(u.show);w(()=>u.show,d=>{l.value=d}),w(()=>l.value,d=>{m("input",d)});async function _(){try{(await G({delId:u.delId})).code===200?(I({message:"删除成功",type:"success"}),m("success")):I.error("删除失败"),l.value=!1}catch{}}return(d,n)=>{const f=z,s=S;return $(),x("div",null,[a(s,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=e=>l.value=e),title:"添加标签",width:"50rem",center:""},{footer:i(()=>[L("span",P,[a(f,{onClick:n[0]||(n[0]=e=>l.value=!1)},{default:i(()=>[v("取消")]),_:1}),a(f,{type:"primary",onClick:_},{default:i(()=>[v(" 确定 ")]),_:1})])]),default:i(()=>[L("div",null,"是否确定将其"+M(d.title)+"标签？删除！！",1)]),_:1},8,["modelValue"])])}}}),W=h({__name:"MyTableList",setup(r){const m=c(!1),u=c(!1),l=T([]),_=c(""),d=c(0),n=c(""),f=c(""),s=c(0),e=T({page_size:10,page_no:1,total:0});b();function y(p,t,g){n.value=p,f.value=t,g&&(s.value=g),m.value=!0}function E(p){return p*1+1}function C(p,t){_.value=p,d.value=t,u.value=!0}async function b(){try{const p=await A(e);l.splice(0,l.length),l.push(...p.data.data),e.total=p.data.total}catch{}}return(p,t)=>{const g=z,V=U;return $(),x("div",null,[L("header",null,[a(g,{type:"primary",onClick:t[0]||(t[0]=o=>y("添加标签",""))},{default:i(()=>[v("添加标签")]),_:1})]),a(N,{data:l,current_page:e.page_no,"onUpdate:current_page":t[1]||(t[1]=o=>e.page_no=o),page_size:e.page_size,"onUpdate:page_size":t[2]||(t[2]=o=>e.page_size=o),total:e.total,"onUpdate:total":t[3]||(t[3]=o=>e.total=o),onSuccess:t[4]||(t[4]=o=>b())},{default:i(()=>[a(V,{type:"index",width:"300",label:"序号",index:E}),a(V,{prop:"label_name",label:"标签名称"}),a(V,{label:"操作"},{default:i(o=>[a(g,{link:"",type:"info",size:"small",onClick:D=>y("编辑标签",o.row.label_name,o.row.id)},{default:i(()=>[v("编辑")]),_:2},1032,["onClick"]),a(g,{link:"",type:"info",size:"small",onClick:D=>C(o.row.label_name,o.row.id)},{default:i(()=>[v("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","current_page","page_size","total"]),a(K,{show:m.value,editId:s.value,editLabel:f.value,loadingTitle:n.value,onInput:t[5]||(t[5]=o=>m.value=o),onSuccess:b},null,8,["show","editId","editLabel","loadingTitle"]),a(Q,{show:u.value,title:_.value,delId:d.value,onSuccess:b,onInput:t[6]||(t[6]=o=>u.value=o)},null,8,["show","title","delId"])])}}});const ue=O(W,[["__scopeId","data-v-a1501c3e"]]);export{ue as default};
